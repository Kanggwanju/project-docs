# ğŸ“Œ 2025ë…„ 8ì›” 12ì¼ ë…ì„œ ì†Œëª¨ì„ í”„ë¡œì íŠ¸ íšŒì˜ë¡


ëª¨ì„ ëª©ë¡ì—ì„œ ëª¨ì„ ìƒíƒœë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•„í„°ë§ í•¨
-> í•„í„°ë§í•œ ëª©ë¡ë“¤ ë‚˜ì˜´ ex) ëª¨ì§‘, ì¢…ë£Œ, ì·¨ì†Œ

ëª¨ì„ ëª©ë¡ì—ì„œ í•„í„°ë§ í•  ë•Œ ëª¨ì„ ìƒíƒœë¥¼ ì •í•˜ì§€ ì•ŠìŒ
-> ëª¨ì§‘ì¤‘ì¸ ëª¨ì„ë“¤ë§Œ ë‚˜ì˜´

API ì‘ë‹µ DTO êµ¬í˜„

PR ì§„í–‰
feat: #30 ëª¨ì„ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ API, Repository ì‘ì„±
## ê°œìš”
- ëª¨ì„ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ APIë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ Repositoryë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.
- ê·¸ ê³¼ì •ì—ì„œ DB í†µì‹ ì€ QueryDSLì„ ì‚¬ìš©í•˜ì˜€ê³ , í•„í„°ë§ê³¼ ì •ë ¬ì„ ì´ìš©í•œ ì¡°íšŒë¥¼ í…ŒìŠ¤íŠ¸í•˜ì˜€ìŠµë‹ˆë‹¤.

## ë³€ê²½ ì‚¬í•­
1. QueryDSL
- build.gradle, QueryDSL ì„¤ì •ì„ ìœ„í•œ ì¢…ì†ì„± ì¶”ê°€
- QueryDSL ì„¤ì • í´ë˜ìŠ¤ ì¶”ê°€(QueryDslConfig.java)
- QueryDSL ì‚¬ìš©ì„ ìœ„í•œ ì»¤ìŠ¤í…€ ë ˆí¬ì§€í† ë¦¬(MeetingRepositoryCustom) ì¶”ê°€ ë°
  êµ¬í˜„ì²´ ìƒì„±(MeetingRepositoryImpl)

2. ëª¨ì„ ë¦¬ìŠ¤íŠ¸ë¥¼ í•„í„°ë§, ì •ë ¬ì„ í†µí•´ ì¡°íšŒ (MeetingRepositoryImpl)
- ì¡°ê±´: region(ì‹œ/ë„), city(ì‹œ/êµ¬/êµ°), genre(ëª¨ì„ ì¥ë¥´), status(ëª¨ì§‘, ì¢…ë£Œ, ì·¨ì†Œ),
  sortBy(ìµœì‹ ìˆœ, ë¯¸íŒ… ì‹œê°„ ì„ë°• ìˆœì„œ, ë°©ì¥ì˜ ì¸ê¸° ìˆœì„œ)
- ê¸°ë³¸ì ìœ¼ë¡œ statusëŠ” ëª¨ì§‘ìœ¼ë¡œ ì„¤ì •í•˜ì—¬, ëª¨ì§‘ ì¢…ë£Œ ì·¨ì†Œê°€ ë³µì¡í•˜ê²Œ ì„ì—¬ì„œ ë³´ì´ëŠ” ìƒí™©ì„
  ë¯¸ë¦¬ ì œí•œí•¨.

3. í…ŒìŠ¤íŠ¸
- MeetingListTest.java íŒŒì¼ì—ì„œ ì§„í–‰


## í…ŒìŠ¤íŠ¸ ë°©ë²•
- ë¡œì»¬ì—ì„œ ì§ì ‘ ì •ë ¬ê³¼ í•„í„°ë§ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±
- BDD(given-when-then) ìŠ¤íƒ€ì¼, QueryDslë¡œ MeetingRepositoryCustomì„  ê°„ë‹¨í•˜ê²Œ í…ŒìŠ¤íŠ¸

## ê´€ë ¨ ì´ìŠˆ
- Resolves #30 

---

ë¬¸ì œ - ë¯¸íŒ… ì‹œê°„ì´ ì§€ë‚œ ëª¨ì„ì€ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ 
ë¯¸íŒ…ì˜ ìƒíƒœë¥¼ ëª¨ì§‘ ìƒíƒœ -> ì¢…ë£Œ ìƒíƒœë¡œ ì–´ë–»ê²Œ ë§Œë“¤ê²ƒì¸ê°€?

ìë™í™”ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— **ìŠ¤ì¼€ì¤„ë§**ì´ í•„ìš”

## ìŠ¤ì¼€ì¤„ëŸ¬(Spring Boot ì˜ˆì‹œ)ë¡œ ì£¼ê¸°ì  ìë™ ì²˜ë¦¬

Spring Bootë¥¼ ì“´ë‹¤ë©´ `@Scheduled`ë¥¼ í™œìš©í•´ ë§¤ì¼ ë˜ëŠ” ë§¤ì‹œê°„ ì‹¤í–‰ë˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
@Service
@RequiredArgsConstructor
public class MeetingStatusScheduler {

    private final MeetingRepository meetingRepository;

    // ë§¤ì¼ ìƒˆë²½ 1ì‹œì— ì‹¤í–‰
    @Scheduled(cron = "0 0 1 * * *")
    @Transactional
    public void updateEndedMeetings() {
        meetingRepository.updateEndedMeetings();
    }
}
```

Repositoryì— ì¿¼ë¦¬ ë©”ì„œë“œ ì‘ì„±:

```java
public interface MeetingRepository extends JpaRepository<Meeting, Long> {

    @Modifying
    @Query("UPDATE Meeting m " +
           "SET m.status = 'ENDED' " +
           "WHERE m.status = 'RECRUITING' " +
           "AND m.meetingTime < CURRENT_TIMESTAMP")
    int updateEndedMeetings();
}
```

**ì¥ì **

* ë°°ì¹˜ ì‘ì—…ì²˜ëŸ¼ ì •í•´ì§„ ì‹œê°„ì— ìë™ìœ¼ë¡œ ì‹¤í–‰ë¨
* ê´€ë¦¬ìê°€ ì‹ ê²½ ì•ˆ ì¨ë„ ë°ì´í„° ìµœì‹  ìƒíƒœ ìœ ì§€

---

## ìš”ì•½

* **ì¦‰ì‹œ ë³€ê²½**: `UPDATE` SQL ì‹¤í–‰
* **ìë™ ë³€ê²½**: ìŠ¤ì¼€ì¤„ëŸ¬(`@Scheduled`) + ì¿¼ë¦¬ ë©”ì„œë“œ
* ìš´ì˜í™˜ê²½ì—ì„œëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ ì£¼ê¸°(ë§¤ì¼/ë§¤ì‹œê°„)ì™€ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ì£¼ì˜
* ëŒ€ê·œëª¨ ë°ì´í„°ë©´ ì¸ë±ìŠ¤(`meeting_time`, `status`) ê±¸ì–´ì„œ ì„±ëŠ¥ ìµœì í™”


---

`@Scheduled` ê°™ì€ ìŠ¤ì¼€ì¤„ëŸ¬ ë°©ì‹ì€ **ì„œë²„ê°€ ì¼œì ¸ ìˆëŠ” ìƒíƒœì—ì„œë§Œ** ë™ì‘

ì¦‰,

* ìƒˆë²½ 1ì‹œì— ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í–ˆëŠ”ë°
* **ê·¸ ì‹œê°„ì— í†°ìº£(ì„œë²„)ì´ êº¼ì ¸ ìˆë‹¤ë©´ â†’ ì‘ì—…ì´ ì‹¤í–‰ë˜ì§€ ì•ŠìŒ**

---

## í•´ê²° ë°©ë²• 3ê°€ì§€

1. **ì„œë²„ í•­ìƒ ì¼œë‘ê¸°**

  * AWS EC2, í´ë¼ìš°ë“œ ì„œë²„, ë˜ëŠ” ìš´ì˜ ì„œë²„ì— í•­ìƒ ë°°í¬í•´ë‘ê³  ì‹¤í–‰
  * ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì •í•´ì§„ ì‹œê°„ë§ˆë‹¤ ìë™ìœ¼ë¡œ ë™ì‘

2. **DB ìì²´ì˜ ìŠ¤ì¼€ì¤„ëŸ¬ ì‚¬ìš©**

  * MySQL ì´ë²¤íŠ¸ ìŠ¤ì¼€ì¤„ëŸ¬ ì˜ˆì‹œ:

    ```sql
    CREATE EVENT IF NOT EXISTS update_meeting_status
    ON SCHEDULE EVERY 1 HOUR
    DO
      UPDATE meeting
      SET status = 'ENDED'
      WHERE status = 'RECRUITING'
        AND meeting_time < NOW();
    ```
  * DBê°€ ì¼œì ¸ ìˆìœ¼ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ê°€ êº¼ì ¸ ìˆì–´ë„ ìë™ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

3. **ì™¸ë¶€ ë°°ì¹˜/í¬ë¡  ì¡ ì‚¬ìš©**

  * ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ `cron`ìœ¼ë¡œ ë§¤ì¼ ìƒˆë²½ 1ì‹œì— ì‹¤í–‰
  * ë˜ëŠ” Jenkins, GitHub Actions ê°™ì€ CI/CD ë„êµ¬ë¥¼ ì´ìš©í•´ ì‹¤í–‰

---

ğŸ’¡ **ì •ë¦¬**

* `@Scheduled` â†’ ì„œë²„ê°€ êº¼ì ¸ ìˆìœ¼ë©´ ì‘ë™ âŒ
* MySQL ì´ë²¤íŠ¸ ìŠ¤ì¼€ì¤„ëŸ¬ or cron â†’ ì„œë²„ êº¼ì ¸ë„ DBë§Œ ì‚´ì•„ìˆìœ¼ë©´ ì‘ë™ â­•
* ìš´ì˜í™˜ê²½ì—ì„œëŠ” ì„œë²„ ìœ ì§€ + ë°°ì¹˜ í”„ë¡œì„¸ìŠ¤ or DB ìŠ¤ì¼€ì¤„ëŸ¬ í˜¼í•©í•´ì„œ ì“°ëŠ” ê²½ìš° ë§ìŒ


