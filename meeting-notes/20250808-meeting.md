# 📌 2025년 8월 8일 독서 소모임 프로젝트 회의록

## 1. 회의 개요

* **일시:** 2025년 8월 8일
* **주요 안건:**

    1. API 명세서 수정 및 Response 데이터 구조 확장
    2. 개념 ERD, 논리 ERD 완성
    3. 코드 리뷰 규칙, 주석 규칙, 클래스 생성 규칙 논의
    4. 비즈니스(커스텀) 에러 응답 체계 확정 및 테스트 진행

---

## 1. API 명세서 변경 사항

### 1-1. **모임 리스트 조회 (검색/필터/정렬)**

* `GET` /api/meetings?region=강남구&genre=소설&status=RECRUITING&sort=latest&page=1&size=6
* `설명`: 6개씩 카드, 필터(지역/장르/상태), 정렬(마감임박/최신/인기순)
* **변경 이유:** 기존 Response에 host 정보가 너무 단순하여, 리스트에서 모임에 대한 충분한 정보를 제공하기 어려움.
* **추가 필드:**

    * `reviewedCount`: 해당 호스트가 받은 좋아요(리뷰) 수
    * `profileImageUrl`: 호스트 프로필 이미지 URL
    * `userIntroduction`: 호스트 자기소개
    * `description`, `bookTitle`, `bookAuthor` 추가로 모임 및 책 정보 표시

* **예시 Response:**

```json
{
  "content": [
    {
      "meetingId": 10,
      "host": {
        "userId": 1,
        "nickname": "책읽는호랑이",
        "reviewedCount": 32,
        "profileImageUrl": "http://.../profile1.jpg",
        "userIntroduction": "37세 남성입니다."
      },
      "title": "8월 미드나잇 독서모임",
      "description": "조용한 사람들을 찾고있는 책사랑 모임입니다.",
      "imageUrl": "http://.../meet1.jpg",
      "bookTitle": "돈의 속성",
      "bookAuthor": "김승호",
      "genre": "소설",
      "meetingTime": "2025-08-15T19:30:00",
      "location": "서울시 강남구 독서카페 2층",
      "maxParticipants": 8,
      "currentParticipants": 6,
      "status": "RECRUITING",
      "createdAt": "2025-08-14T19:30:00",
      "updatedAt": "2025-08-14T20:30:00"
    }
  ],
  "page": 1,
  "size": 6,
  "totalElements": 32
}
```

---

### 1-2. **모임 상세 조회 (`GET /api/meetings/{meetingId}`)**

* **변경 이유:** 참가자 정보 및 호스트 정보가 부족하여, 화면에서 별도의 호출 없이도 상세 페이지에 필요한 데이터를 한 번에 내려줄 수 있도록 개선.
* **추가 필드:**

    * `host`: reviewedCount, profileImageUrl, userIntroduction 포함
    * `participants`: 각 참가자의 reviewedCount, profileImageUrl, 참가 상태(`status`) 추가
* **예시 Response:**

```json
{
  "meetingId": 10,
  "title": "8월 미드나잇 독서모임",
  "description": "조용한 사람들을 찾고있는 책사랑 모임입니다.",
  "imageUrl": "http://.../meet1.jpg",
  "bookTitle": "돈의 속성",
  "bookAuthor": "김승호",
  "genre": "소설",
  "meetingTime": "2025-08-15T19:30:00",
  "location": "서울시 강남구 독서카페 2층",
  "maxParticipants": 8,
  "currentParticipants": 6,
  "status": "RECRUITING",
  "createdAt": "2025-08-14T19:30:00",
  "updatedAt": "2025-08-14T20:30:00",
  "host": {
    "userId": 1,
    "nickname": "책읽는호랑이",
    "reviewedCount": 32,
    "profileImageUrl": "http://.../profile1.jpg",
    "userIntroduction": "37세 남성입니다."
  },
  "participants": [
    {
      "userId": 1,
      "nickname": "책읽는호랑이",
      "reviewedCount": 32,
      "role": "HOST",
      "status": "APPROVED",
      "profileImageUrl": "http://.../profile1.jpg"
    },
    {
      "userId": 2,
      "nickname": "책벌레",
      "reviewedCount": 15,
      "role": "PARTICIPANT",
      "status": "PENDING",
      "profileImageUrl": "http://.../profile2.jpg"
    }
  ]
}
```

---

## 2. 데이터베이스 설계

* **개념 ERD**: 엔티티 간 관계(1\:N, N\:M, 식별/비식별 관계) 명확히 정의
* **논리 ERD**: 데이터 타입, 제약조건, PK/FK 완성

---

## 3. 개발 규칙 논의

* **코드 리뷰 규칙**: Pull Request 기반, 최소 1명 승인 필수, 팀장과 함께 리뷰
* **주석 규칙**: 메서드와 클래스에 Javadoc 스타일 주석 권장
* **클래스 생성 규칙**: 역할별 패키지 분리(`controller`, `service`, `repository`, `dto`, `entity`)

---

## 4. 에러 응답 체계 및 테스트

* **에러 응답 구조**: `ErrorCode` Enum → `CustomException` → `GlobalExceptionHandler`를 통한 처리
* **테스트 방법:**

    * 프로젝트 초기라 실제 컨트롤러가 없어 `DummyController` 작성
    * `mockMvc`를 이용해 **CustomException 검증**, **유효성 검증 성공/실패** 케이스 테스트
    * BDD(Behavior-Driven Development) 스타일의 테스트 작성
    * 테스트 케이스 구조: **given**, **when**, **then** 구분
    * Given: 테스트의 초기 상태나 준비 조건을 설정 (테스트 대상의 배경)
    * When: 실제로 동작을 수행하는 부분 (행동)
    * Then: 기대하는 결과를 검증하는 부분 (결과 확인)

---

## 5. mockMvc 간단 설명

1. Spring MVC 테스트를 위한 클래스
2. 실제 서버를 띄우지 않고 Controller의 요청/응답을 테스트 가능
3. HTTP 요청(GET, POST 등) 시뮬레이션 지원
4. JSON 요청/응답 검증, 상태 코드, 헤더, 본문 검사 가능
5. 주로 `@WebMvcTest`와 함께 사용하여 Controller 단위 테스트에 활용

